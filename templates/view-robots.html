{% extends 'layouts/ui-base.html' %}

{% block content %}
<div class="ui container">

    <div class="ui top attached centered inverted menu">
        <a class="ui item" data-weight="ALL">All Robots</a>
        <a class="ui item" data-weight="ANT">Antweight</a>
        <a class="ui item" data-weight="PLANT">Plastic Ant</a>
        <a class="ui item" data-weight="BEETLE">Beetleweight</a>
    </div>
    <table class="ui bottom attached table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Weight</th>
            </tr>
        </thead>
        <tbody id="table-body"></tbody>
    </table>
</div>
{% endblock %}

{% block bodyScripts %}
<script type="module">
    import { getRobotList } from '/static/scripts/utilities.js';
    const weightBtns = document.querySelectorAll('[data-weight]');
    const tbody = document.getElementById('table-body');

    function buildTable(weight=null, tableBody=tbody) {
        tableBody.innerHTML = '';
        getRobotList(weight).then( robotList => {
            robotList.forEach( robot => {
                // For each robot in the list of robots for the specified weight class...
                
                // destructure values
                let { id, weight, robot_name } = robot;
                
                // Make a new row
                let row = document.createElement('tr');

                // Fill in values
                row.innerHTML = `<td>${id}</td><td>${weight}</td><td>${robot_name}</td>`;

                // Add row to table body
                tableBody.appendChild(row);
            })
        })
    }

    // Add an event listener to each button that loads the relevant table
    weightBtns.forEach(btn => btn.addEventListener('click', () => {
        buildTable(btn.dataset.weight);
    }));

    window.onload = buildTable();




</script>
{% endblock bodyScripts %}