{% extends 'layouts/ui-base.html' %}

{% block headScripts %}
<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
{% endblock headScripts %}

{% block content %}
    <h1>Display Test</h1>
    <p>Displays everything. Primarily intended for troubleshooting purposes</p>
    <button id="update-all">Update</button>
    <h2>Current Match</h2>
    <p><span id="weight">Weight Class</span>  <span id="red-bot">Red</span>   <span id="blue-bot">Blue</span></p>

    <style>
        #red-bot {
            text-shadow: 0 0 3px red, 0 0 5px red;
        }
        #blue-bot {
            text-shadow: 0 0 3px #59f, 0 0 5px #59f;
        }
    </style>

{% endblock %}

{% block bodyScripts %}
    <script type="module">
        import { displayMatchInfo } from '/static/scripts/utilities.js';
        const ws = new WebSocket('ws://localhost:8000/ws/display');
        ws.onopen = (event) => {
            console.log('connected');
            ws.send("Display test connected");
        }
        ws.onmessage = (event) => {
            console.log(event.data);
            if (event.data == 'refresh') {
                console.log('time to refresh');
                displayMatchInfo();
            }
        }
        displayMatchInfo();

        document.getElementById('update-all').addEventListener('click', () => displayMatchInfo());
        
    </script>
{% endblock bodyScripts %}
